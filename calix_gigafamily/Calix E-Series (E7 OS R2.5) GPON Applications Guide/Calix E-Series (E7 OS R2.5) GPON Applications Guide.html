<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-05-05 五 17:59 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title></title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="light" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">1. Calix E-Series (E7 OS R2.5) GPON Applications Guide</a></li>
<li><a href="#orgheadline9">2. GPON Solution</a>
<ul>
<li><a href="#orgheadline3">2.1. Supported GPON Equipment</a>
<ul>
<li><a href="#orgheadline2">2.1.1. Calix ONTs</a></li>
</ul>
</li>
<li><a href="#orgheadline8">2.2. Home Gateway Overview</a>
<ul>
<li><a href="#orgheadline4">2.2.1. Home Gateway Concepts</a></li>
<li><a href="#orgheadline5">2.2.2. Home Gateway Port Assignments</a></li>
<li><a href="#orgheadline6">2.2.3. RG Management Modes</a></li>
<li><a href="#orgheadline7">2.2.4. Native vs. External RG Management Mode</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline11">3. Service Provisioning Workflows</a>
<ul>
<li><a href="#orgheadline10">3.1. Overview: HGW Applications - External Mode</a></li>
</ul>
</li>
<li><a href="#orgheadline15">4. Service Provisioning Examples</a>
<ul>
<li><a href="#orgheadline12">4.1. Example: HGW Service - External Mode</a></li>
<li><a href="#orgheadline13">4.2. Example: HGW Service - P-Series Native Mode</a></li>
<li><a href="#orgheadline14">4.3. Example: HGW Service - TR-069</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1"><span class="section-number-2">1</span> Calix E-Series (E7 OS R2.5) GPON Applications Guide</h2>
<div class="outline-text-2" id="text-1">
<p>
<a href="https://www.calix.com/content/calix/en/site-prod/library-html/systems-products/e-series/sysop/e7-ud/r2-5/gpon-ag/index.htm?toc3679812.htm?83137.htm">https://www.calix.com/content/calix/en/site-prod/library-html/systems-products/e-series/sysop/e7-ud/r2-5/gpon-ag/index.htm?toc3679812.htm?83137.htm</a>
</p>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-2">
<h2 id="orgheadline9"><span class="section-number-2">2</span> GPON Solution</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">2.1</span> Supported GPON Equipment</h3>
<div class="outline-text-3" id="text-2-1">
</div><div id="outline-container-orgheadline2" class="outline-4">
<h4 id="orgheadline2"><span class="section-number-4">2.1.1</span> Calix ONTs</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
In a GPON system, ONTs provide the access endpoints and may also include home gateway functionality. The E7 GPON system is interoperable with the following Calix access endpoints and gateways:
</p>

<ul class="org-ul">
<li>Calix 800 GigaCenters*, GigaHubs*, and GigaPoints</li>
<li>Calix P-Series 836GE RSGs*, 700GE ONTs*, and 700GX ONTs</li>
<li>Calix T-Series T07xG HGUs* and T7x0G ONTs</li>
<li>Calix GPON Interface Adaptor with supported Ethernet Service Access Nodes (ESANs)</li>
</ul>

<p>
*Note: These ONTs support Calix Home Gateway functionality.
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8"><span class="section-number-3">2.2</span> Home Gateway Overview</h3>
<div class="outline-text-3" id="text-2-2">
</div><div id="outline-container-orgheadline4" class="outline-4">
<h4 id="orgheadline4"><span class="section-number-4">2.2.1</span> Home Gateway Concepts</h4>
<div class="outline-text-4" id="text-2-2-1">
<p>
The following terms are used in relation to HGWs:
</p>

<ul class="org-ul">
<li>LAN interface – The ports which are connected to subscriber devices. These ports are generally unmanaged and support layer-2 switching between them.</li>

<li>WAN interface – The port which is connected to the access provider.</li>

<li>Internal interface – This is another name for the LAN interface when talking in the context of NAT and IP address spaces. It represents an interface which is using a private/locally scoped address.</li>

<li>External interface – This is another name for the WAN interface when talking in the context of NAT. It represents an interface which is using a globally scoped address.</li>
</ul>

<p>
When an HGW is provisioned, it operates with two partitions:
</p>

<ul class="org-ul">
<li>Gateway partition
<ul class="org-ul">
<li>Local and wireless network</li>
<li>Home Gateway services</li>
<li>Management using TR-069 client</li>
</ul></li>
<li>ONT partition
<ul class="org-ul">
<li>ONT Management</li>
<li>Subscriber Services (IPTV, voice, data, RF video)</li>
</ul></li>
</ul>


<div class="figure">
<p><img src="67689.png" alt="67689.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-4">
<h4 id="orgheadline5"><span class="section-number-4">2.2.2</span> Home Gateway Port Assignments</h4>
<div class="outline-text-4" id="text-2-2-2">
<p>
Interface Group Assignments
</p>


<div class="figure">
<p><img src="Interface%20Group%20Assignments.png" alt="Interface%20Group%20Assignments.png" />
</p>
</div>

<ul class="org-ul">
<li>When a GigaCenter, GigaHub, or 836 RSG ONT is created, all ONT Ethernet ports are assigned as members of the RG group. Ports can be removed from the RG group and added to the FB group as needed.</li>

<li>When a P-Series or T-Series ONT is created, the ONT Ethernet ports are not members of any interface group, and can be added to an interface group as needed.</li>
</ul>

<p>
Examples of port assignment configurations
</p>


<div class="figure">
<p><img src="Examples%20of%20port%20assignment%20configurations.png" alt="Examples%20of%20port%20assignment%20configurations.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-4">
<h4 id="orgheadline6"><span class="section-number-4">2.2.3</span> RG Management Modes</h4>
<div class="outline-text-4" id="text-2-2-3">
<p>
Note: P-Series GPON Calix Home Gateways include the GPON GigaCenters, GigaHubs, 836GE RSGs, and 700GE ONTs.
</p>

<ul class="org-ul">
<li>Native mode</li>
</ul>
<p>
Native (P-Series only) is the default behavior where the CMS/E7 directly provision up to 4 RG WAN interfaces. However, voice and legacy L2 services are still natively supported for non-RG ports. In this mode, both the RG and ONT partitions are controlled by the CMS/E7.
</p>

<ul class="org-ul">
<li>External mode</li>
</ul>
<p>
External uses an external RG configuration file that is downloaded (via inband OMCI) to the ONT to fully manage the WAN interfaces on the RG. In this mode, the CMS/E7 do not provision the RG WAN interface on the RG partition. Except that the creation of an out-of-band (OOB) management VLAN is controlled by the E7 OLT.
</p>
<ul class="org-ul">
<li><ul class="org-ul">
<li>The RG partition is controlled by the configuration file.</li>
<li>The ONT partition is controlled by the E7 OLT.</li>
</ul></li>
</ul>

<p>
Using an RG configuration file, a service provider is able to define up to four Routed WAN interfaces supporting data, IPTV and auxiliary service VLANs as necessary. The RG configuration can explicitly define these service VLANs along with service static routes to bridge traffic on the LAN and wireless interfaces to the correct service VLAN.
</p>

<p>
Applying a new RG configuration file will reset the RG configuration on the HGW. If a subscriber has modified any of the items below via the EWI, these changes will be lost when the new RG configuration file is applied.
</p>

<ul class="org-ul">
<li>Admin password</li>
<li>Primary SSID</li>
<li>Primary WPA/WPA2 key</li>
</ul>


<ul class="org-ul">
<li>Use Cases for Management Modes</li>
</ul>

<div class="figure">
<p><img src="Use_Cases_for_Management_Modes.png" alt="Use_Cases_for_Management_Modes.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-4">
<h4 id="orgheadline7"><span class="section-number-4">2.2.4</span> Native vs. External RG Management Mode</h4>
<div class="outline-text-4" id="text-2-2-4">
<ul class="org-ul">
<li>Native Mode (recommended whenever possible)
<ul class="org-ul">
<li>Advantages
<ul class="org-ul">
<li>Adding E7 services automatically creates the required service VLANs on the RG WAN interface</li>
<li>No RG config files are required</li>
<li>no risk of user-configured changes getting lost due to applying a new/updated RG config file</li>
</ul></li>
<li>Considerations:
<ul class="org-ul">
<li>E7 is in complete control of the RG WAN interface;
<ul class="org-ul">
<li>CC+ profiles or RG config files (applied via CC+) cannot effect any changes on the WAN side.</li>
</ul></li>
<li>The following <span class="underline"><span class="underline">cannot</span></span> be provisioned on the RG WAN:
<ul class="org-ul">
<li>L2 Bridge Interface</li>
<li>Enabling TR-069 management of voice services (TR-069 VoIP mode and required WAN VLAN)</li>
</ul></li>
</ul></li>
</ul></li>
<li>External Mode
<ul class="org-ul">
<li>Advantages
<ul class="org-ul">
<li>Via an RG config file, the following can be provisioned on the RG WAN interface:
<ul class="org-ul">
<li>L2 Bridge Interface</li>
<li>Enabling TR-069 management of voice services (TR-069 VoIP mode and required WAN VLAN),
<ul class="org-ul">
<li>which allows CC+ to apply a voice profile and dial plan.</li>
</ul></li>
</ul></li>
<li>Other features only available via an RG Config File can be provisioned (rarely required)</li>
</ul></li>
<li>Considerations:
<ul class="org-ul">
<li>Connectivity is not possible without an initial configuration via an RG config file or the EWI</li>
<li>RG config files (and the associated management and overhead) are required</li>
<li>user-configured changes will be lost if a new/updated RG config file is ever applied</li>
<li>out-of-the-box installation time is longer (at least one more device reset is required to apply the RG config file)</li>
<li>Recommendation if External mode is required:
<ul class="org-ul">
<li>Use the most basic RG config file possible (not likely to require future updates)</li>
<li>use CC+ for all other provisioning.</li>
</ul></li>
</ul></li>
</ul></li>
<li>Decision flowchart</li>
</ul>


<div class="figure">
<p><img src="83996.png" alt="83996.png" />
</p>
</div>

<ul class="org-ul">
<li>Detailed comparison of modes</li>
</ul>
<p>
<img src="Detailed_comparison_of_modes01.png" alt="Detailed_comparison_of_modes01.png" />
<img src="Detailed_comparison_of_modes02.png" alt="Detailed_comparison_of_modes02.png" />
<img src="Detailed_comparison_of_modes03.png" alt="Detailed_comparison_of_modes03.png" />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-2">
<h2 id="orgheadline11"><span class="section-number-2">3</span> Service Provisioning Workflows</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10"><span class="section-number-3">3.1</span> Overview: HGW Applications - External Mode</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>Provisioning partitions</li>
</ul>
<p>
When an ONT is configured for external mode, the E7 does not provision the RG WAN interface on the ONT(with the exception of the out-of-band TR-069 management mode). The sole responsibility for configuration of an ONT in external mode is completely dependent on the RG configuration file.
</p>
<ul class="org-ul">
<li><ul class="org-ul">
<li>The RG partition is controlled by the configuration file.</li>
<li>The ONT partition is controlled by the E7 OLT.</li>
</ul></li>
</ul>

<p>
When a configuration file is loaded on the ONT, there are three elements of the ONT configuration that remain specific to each ONT:
</p>
<ul class="org-ul">
<li><ul class="org-ul">
<li>Admin password</li>
<li>Primary SSID</li>
<li>Primary WPA/WPA2 key</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-2">
<h2 id="orgheadline15"><span class="section-number-2">4</span> Service Provisioning Examples</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12"><span class="section-number-3">4.1</span> Example: HGW Service - External Mode</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>Example deployment of services using the E7 configuration file:
<ul class="org-ul">
<li>Step 1: Configure network uplinks</li>
<li>Step 2: Create system profiles
<ul class="org-ul">
<li>Create an ONT Template.</li>
</ul></li>
</ul></li>
</ul>
<p>
Using CMS R12.1, you can provision an ONT template that defines all of the key management aspects of the ONT as well as the logical assignments of physical GE ports.
</p>
<ul class="org-ul">
<li><ul class="org-ul">
<li><ul class="org-ul">
<li><ul class="org-ul">
<li>Management mode: external</li>
<li>WAN protocol: DHCP</li>
<li>DSCP/IP Precedence: access</li>
<li>Security profile: system-default</li>
<li>RG: GE 1</li>
<li>FB: GE 2, GE 3, GE 4</li>
<li>CMS &gt; Profile &gt; E7/ONT &gt; Templates &gt; ONT &gt; Create</li>
</ul></li>
</ul></li>
</ul></li>
</ul>

<div class="figure">
<p><img src="67810.png" alt="67810.png" />
</p>
</div>
<ul class="org-ul">
<li><ul class="org-ul">
<li>Step 3: Configure a PON</li>
<li>Step 4: Configure subscriber services</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13"><span class="section-number-3">4.2</span> Example: HGW Service - P-Series Native Mode</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li>Best Practice:
<ul class="org-ul">
<li>Step 1: Configure network uplinks</li>
<li>Step 2: Create system profiles
<ul class="org-ul">
<li>Create an ONT Template.</li>
</ul></li>
</ul></li>
</ul>

<p>
Using CMS R12.1, you can provision an ONT template that defines all of the key management aspects of the ONT as well as the logical assignments of physical GE ports.
</p>
<ul class="org-ul">
<li><ul class="org-ul">
<li><ul class="org-ul">
<li><ul class="org-ul">
<li>Management mode: Native</li>
<li>WAN protocol: DHCP</li>
<li>DSCP/IP Precedence: access</li>
<li>Security profile: system-default</li>
<li>RG: GE 1</li>
<li>FB: GE 2, GE 3, GE 4</li>
<li>CMS &gt; Profile &gt; E7/ONT &gt; Templates &gt; ONT &gt; Create</li>
</ul></li>
</ul></li>
</ul></li>
</ul>

<div class="figure">
<p><img src="70147.png" alt="70147.png" />
</p>
</div>
<ul class="org-ul">
<li><ul class="org-ul">
<li>Step 3: Configure a PON</li>
<li>Step 4: Configure subscriber services</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14"><span class="section-number-3">4.3</span> Example: HGW Service - TR-069</h3>
<div class="outline-text-3" id="text-4-3">
<p>
<a href="https://www.calix.com/content/calix/en/site-prod/library-html/systems-products/e-series/sysop/e7-ud/r2-5/gpon-ag/index.htm?toc36798159.htm?67101.htm">https://www.calix.com/content/calix/en/site-prod/library-html/systems-products/e-series/sysop/e7-ud/r2-5/gpon-ag/index.htm?toc36798159.htm?67101.htm</a>
</p>
<ul class="org-ul">
<li>Example deployment of services using the E7 configuration file:
<ul class="org-ul">
<li>In-Band Management Mode</li>
<li>Out-of-Band Management Mode</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: light</p>
<p class="date">Created: 2017-05-05 五 17:59</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
